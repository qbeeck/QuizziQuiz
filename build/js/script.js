"use strict";function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e=document.querySelector(".game"),t=document.querySelector(".loader"),n=Array.from(document.getElementsByClassName("choice-text")),o=document.querySelector(".game__question"),c=document.querySelector(".question-counter"),i=document.querySelector(".score-counter"),u=document.querySelector(".progress-bar-full"),s=[],l=[],m={},d=0,f=0,p=!1;"/game.html"==window.location.pathname&&axios.get("https://opentdb.com/api.php?amount=10&type=multiple").then(function(e){s=e.data.results.map(function(e){var n={question:b(e.question),answer:Math.floor(4*Math.random())+1},t=r(e.incorrect_answers);return t.splice(n.answer-1,0,e.correct_answer),t.forEach(function(e,t){n["choice"+(t+1)]=b(e)}),n}),g()}).catch(function(e){console.log(e)});var g=function(){d=f=0,l=r(s),h(),t.classList.add("hidden"),e.classList.remove("hidden")},h=function(){if(0===l.length||10<=c)return localStorage.setItem("mostScore",f),console.log("yep"),window.location.assign("/end.html");d++,c.innerText="".concat(d," / 10"),u.style.width="".concat(d/10*100,"%");var e=Math.floor(Math.random()*l.length);m=l[e],o.innerText=m.question,n.forEach(function(e){var t=e.dataset.number;e.innerHTML=m["choice"+t]}),l.splice(e,1),p=!0};n.forEach(function(e){e.addEventListener("click",function(e){var t,n;p&&(p=!1,t=e.target,"correct"==(n=t.dataset.number==m.answer?"correct":"incorrect")&&v(10),t.parentElement.classList.add(n),setTimeout(function(){t.parentElement.classList.remove(n),h()},500))})});var y,v=function(e){f+=e,i.innerText=f},b=function(e){return e.replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&rsquo;/g,"'").replace(/&amp;/g,"&").replace(/&ograve;/g,"ò").replace(/&Ograve;/g,"Ò").replace(/&Uuml;/g,"Ü").replace(/&uuml;/g,"ü").replace(/&eacute;/g,"é").replace(/&Eacute;/g,"É")},w=document.querySelector(".input-username"),S=document.getElementById("save-button"),q=document.querySelector(".final-score"),E=localStorage.getItem("mostScore");firebase.initializeApp({apiKey:"AIzaSyCYBss10j2vvnqVZ0W1i6m1s8HClYVW1Oo",authDomain:"javasc-a9a08.firebaseapp.com",projectId:"javasc-a9a08",storageBucket:"javasc-a9a08.appspot.com",messagingSenderId:"636217841571",appId:"1:636217841571:web:f0193b4a8a89bdfcec6c16"}),"/end.html"==window.location.pathname&&(q.innerText=E,w.addEventListener("keyup",function(){S.disabled=!w.value}),S.addEventListener("click",function(){y(),setTimeout(function(){return window.location.assign("/index.html")},1e3)}),y=function(){firebase.database().ref("players/"+w.value).set({username:w.value,points:q.textContent})});var A,L=document.querySelector(".list");"/highlight.html"==window.location.pathname&&(A=function(e){L.insertAdjacentHTML("afterbegin","<li>".concat(e.username," : ").concat(e.points,"</li>"))},document.addEventListener("DOMContentLoaded",function(){firebase.database().ref("players").once("value",function(e){e.forEach(function(e){e={username:e.val().username,points:e.val().points};A(e)})})}));